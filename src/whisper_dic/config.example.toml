[hotkey]
# Which modifier key triggers dictation
# Options: left_option, right_option, left_command, right_command, left_shift, right_shift
key = "left_option"

[recording]
# Taps shorter than min_duration trigger language cycling instead of recording
min_duration = 0.3
# Recordings longer than max_duration are discarded (safety limit)
max_duration = 300.0
sample_rate = 16000
# Microphone to use (run 'whisper-dic devices' to list available mics)
# device = "MacBook Pro Microphone"
# Show live transcription preview while recording (uses extra API calls)
# streaming_preview = false
# preview_interval = 3.0  # seconds between preview updates
# Use a different provider for live preview (e.g. "local" for unlimited calls)
# Leave unset to use the main provider
# preview_provider = "local"

[whisper]
# Provider: "groq" (cloud, fast, free tier) or "local" (offline, needs whisper.cpp server)
# Groq: get a free API key at https://console.groq.com — no GPU required
# Local: run a whisper.cpp server first (see https://github.com/ggerganov/whisper.cpp)
provider = "local"
language = "en"
# Double-tap the hotkey to cycle between these languages
languages = ["en", "nl"]
timeout_seconds = 120.0
# Vocabulary biasing — helps Whisper recognize domain-specific words
# prompt = "Kotlin, PostgreSQL, whisper-dic"
# If primary provider fails, try the other one
failover = false

[whisper.local]
url = "http://localhost:2022/v1/audio/transcriptions"
model = "large-v3"

[whisper.groq]
# Get your key from https://console.groq.com (free tier: 20 req/min)
api_key = ""
model = "whisper-large-v3"
url = "https://api.groq.com/openai/v1/audio/transcriptions"

[paste]
auto_send = false

[text_commands]
enabled = true

[audio_control]
# Auto-mute audio devices during recording
enabled = false
mute_local = true

# Network devices (run 'whisper-dic discover' to find available devices)
# [[audio_control.devices]]
# type = "adb"
# name = "Android Tablet"
# serial = ""  # leave empty to auto-detect first connected device
# unmute_volume = 10  # volume level to restore (0-15)

# [[audio_control.devices]]
# type = "chromecast"
# name = "Living Room Speaker"

# [[audio_control.devices]]
# type = "upnp"
# name = "Samsung TV"
# location = "http://192.168.1.100:49152/description.xml"

# [[audio_control.devices]]
# type = "custom"
# name = "My Device"
# mute_command = "some-command --mute"
# unmute_command = "some-command --unmute"

# [custom_commands]
# Add your own voice commands: phrase = "modifier+key"
# Modifiers: cmd, ctrl, shift, alt (combine with +)
# "switch tab" = "ctrl+tab"
# "zoom in" = "cmd+="
# "zoom out" = "cmd+-"
# "refresh" = "cmd+r"

[rewrite]
# AI-powered rewriting of transcriptions using Groq LLM
# Requires a Groq API key (reuses whisper.groq.api_key)
enabled = false
# Mode: "light", "medium", "full", or "custom"
#   light  — fix punctuation and capitalization only
#   medium — fix grammar, punctuation, keep original words
#   full   — reshape into polished prose
#   custom — use your own prompt (see below)
mode = "light"
model = "llama-3.3-70b-versatile"
# Custom prompt (only used when mode = "custom")
# prompt = "Rewrite this transcription in a professional tone."

# Per-app context-aware rewrite prompts
# whisper-dic detects the frontmost app and automatically uses a context-appropriate
# rewrite prompt. Categories: coding, chat, email, writing, browser.
# Each category can be enabled/disabled and given a custom prompt.
# If the app doesn't match any category, the global mode/prompt above is used.

[rewrite.contexts.coding]
# Terminals + IDEs (VS Code, Cursor, Windsurf, JetBrains, iTerm, Warp, etc.)
# Preserves technical terms, converts spoken code patterns (dot py → .py)
enabled = true
# prompt = "Your custom coding prompt here"

[rewrite.contexts.chat]
# Slack, Discord, Teams, iMessage, Signal, Telegram
# Casual tone, minimal intervention
enabled = true

[rewrite.contexts.email]
# Apple Mail, Outlook, Superhuman, Spark
# Professional tone, proper grammar
enabled = true

[rewrite.contexts.writing]
# Notion, Obsidian, Apple Notes, Word, Pages, Bear
# Full prose cleanup, improved clarity
enabled = true

[rewrite.contexts.browser]
# Safari, Chrome, Firefox, Arc, Edge
# Balanced medium cleanup (generic fallback for web apps)
enabled = true

[audio_feedback]
enabled = true
start_frequency = 880    # Hz — beep when recording starts
stop_frequency = 660     # Hz — beep when recording stops
duration_seconds = 0.08  # beep length in seconds
volume = 0.2             # 0.0 (silent) to 1.0 (full) — change via menu bar or: whisper-dic set audio_feedback.volume 0.5

[overlay]
# Accessibility options for the floating recording/preview overlays
reduced_motion = false  # disables pulsing/fade animations
high_contrast = false   # stronger text/background contrast
font_scale = 1.0        # preview text size (0.75 - 2.0)
